import{t as v,a as i,b as ms}from"./BI9x2Sv-.js";import{c as e,r,p as _s,f as z,s as n,t as C,g as c,u as B,d as m,b as H,a as fs}from"./C7yO5yPs.js";import{d as T,s as u}from"./C2vv__MR.js";import{i as g}from"./BGOvWai6.js";import{s as J}from"./BA-W-Fsm.js";import{p as R}from"./0fouXmC9.js";import{o as xs}from"./BREDD7G0.js";import{b as bs}from"./6usKf036.js";import{C as hs}from"./CExfrwZq.js";import{a as qs,P as K}from"./g4djdWft.js";import{l as L}from"./C2QKWiPL.js";import{s as Ps}from"./nC63Ge9I.js";var Ds=p=>{p.stopPropagation(),p.preventDefault()},$s=v('<div style="display:contents;" class="button-wrapper"><!></div>');function Q(p,l){var s=$s();s.__click=[Ds];var _=e(s);Ps(_,()=>l.children),r(s),i(p,s)}T(["click"]);var ks=v('<div class="preview-content svelte-xq881s"><!></div>'),Is=v('<p class="preview-content svelte-xq881s">No messages</p>'),Us=v('<div class="prompt-info svelte-xq881s"><span class="info-value svelte-xq881s"> </span></div>'),ws=(p,l)=>m(l,!0),ys=v('<button class="copy-button svelte-xq881s" title="Copy Prompt"><img src="https://public.llmang.com/icons/edit-copy.svg" alt="Copy" class="svelte-xq881s"></button>'),Cs=(p,l)=>m(l,!0),Rs=v('<button class="edit-button svelte-xq881s">Edit</button>'),Ss=v('<div class="actions-container"><!> <!></div>'),Ms=v('<span class="status-badge svelte-xq881s"><span class="status-dot svelte-xq881s"></span> </span> <div class="message-preview svelte-xq881s"><!></div> <div class="prompt-info svelte-xq881s"><span class="info-value svelte-xq881s"> </span> <span class="message-count svelte-xq881s"> </span></div> <!> <div class="bottom-container svelte-xq881s"><div><span class="runs-count svelte-xq881s"> <!></span> <span class="weight-badge svelte-xq881s"> </span></div> <!></div>',1),Os=v("<!> <!> <!>",1);function Ls(p,l){_s(l,!0);let s=R(l,"prompt",7),_=R(l,"goal",7),V=R(l,"editable",3,!1),f=H(!1),x=H(!1);xs(()=>{var o;!_()&&s().goalUID&&((o=L)!=null&&o.goals[s().goalUID])&&_(L.goals[s().goalUID])});function X(){return s().weight===0?{status:"Stopped",color:"var(--color-danger)"}:s().isCanary?s().maxRuns===0?{status:"Stopped",color:"var(--color-danger)"}:s().maxRuns<=(s().totalRuns||0)?{status:"Finished",color:"var(--color-success)"}:{status:"Running",color:"var(--color-success)"}:s().weight>0?{status:"Running",color:"var(--color-success)"}:{status:"Unknown",color:"var(--color-secondary)"}}const q=B(X);var S=Os(),M=z(S);const Y=B(()=>`${bs}/prompt/${s().UID}`);hs(M,{get title(){return s().UID},get description(){return s().model},get href(){return c(Y)},children:(o,P)=>{var F=Ms(),h=z(F),A=e(h),as=n(A);r(h);var D=n(h,2),es=e(D);{var rs=t=>{var a=ks(),d=e(a);qs(d,{get message(){return s().messages[0].content},get goal(){return _()}}),r(a),i(t,a)},os=t=>{var a=Is();i(t,a)};g(es,t=>{s().messages&&s().messages.length>0?t(rs):t(os,!1)})}r(D);var $=n(D,2),k=e($),ns=e(k,!0);r(k);var E=n(k,2),ls=e(E);r(E),r($);var G=n($,2);{var is=t=>{var a=Us(),d=e(a),w=e(d);r(d),r(a),C(()=>u(w,`Goal: ${s().goalUID??""}`)),i(t,a)};g(G,t=>{s().goalUID&&t(is)})}var N=n(G,2),I=e(N),U=e(I),W=e(U),vs=n(W);{var ps=t=>{var a=ms();C(()=>u(a,`/ ${s().maxRuns??""}`)),i(t,a)};g(vs,t=>{s().isCanary&&t(ps)})}r(U);var j=n(U,2),cs=e(j);r(j),r(I);var ds=n(I,2);{var us=t=>{var a=Ss(),d=e(a);Q(d,{children:(y,gs)=>{var b=ys();b.__click=[ws,x],i(y,b)}});var w=n(d,2);Q(w,{children:(y,gs)=>{var b=Rs();b.__click=[Cs,f],i(y,b)}}),r(a),i(t,a)};g(ds,t=>{V()&&t(us)})}r(N),C(()=>{J(h,`background-color: color-mix(in srgb, ${c(q).color??""} 70%, white 30%)`),J(A,`background-color: ${c(q).color??""}`),u(as,` ${c(q).status??""}`),u(ns,s().model),u(ls,`${s().messages.length??""} messages`),u(W,`Runs: ${s().totalRuns||0} `),u(cs,`Weight: ${s().weight??""}`)}),i(o,F)},$$slots:{default:!0}});var O=n(M,2);{var Z=o=>{K(o,{get isOpen(){return c(f)},get goalUID(){return s().goalUID},get prompt(){return s()},onClose:()=>m(f,!1),onSave:P=>{s(P),m(f,!1)}})};g(O,o=>{c(f)&&o(Z)})}var ss=n(O,2);{var ts=o=>{K(o,{get isOpen(){return c(x)},get goalUID(){return s().goalUID},get prefillData(){return s()},onClose:()=>m(x,!1),onSave:P=>{m(x,!1)}})};g(ss,o=>{c(x)&&o(ts)})}i(p,S),fs()}T(["click"]);export{Ls as P};
