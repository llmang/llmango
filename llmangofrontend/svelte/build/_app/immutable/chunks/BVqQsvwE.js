var yt=Object.defineProperty;var ht=(a,t,e)=>t in a?yt(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var k=(a,t,e)=>ht(a,typeof t!="symbol"?t+"":t,e);import{A as pt}from"./C2QKWiPL.js";import{t as A,a as N}from"./BI9x2Sv-.js";import{M as tt,E as mt,aH as xt,aI as wt,i as Tt,y as zt,aJ as It,aK as kt,_ as Ot,o as P,au as et,av as at,aw as St,aL as Ut,aM as Dt,p as ot,c as o,r as v,s as _,b as Ft,g as R,t as B,a as vt,d as Nt,u as At}from"./C7yO5yPs.js";import{i as M}from"./BGOvWai6.js";import{e as st,i as rt}from"./CSQrPbMc.js";import{p as it}from"./0fouXmC9.js";import{b as Et,w as Ct,d as Pt,s as w}from"./C2vv__MR.js";import{s as D}from"./DIyWOdGJ.js";const Rt=()=>performance.now(),O={tick:a=>requestAnimationFrame(a),now:()=>Rt(),tasks:new Set};function nt(){const a=O.now();O.tasks.forEach(t=>{t.c(a)||(O.tasks.delete(t),t.f())}),O.tasks.size!==0&&O.tick(nt)}function jt(a){let t;return O.tasks.size===0&&O.tick(nt),{promise:new Promise(e=>{O.tasks.add(t={c:a,f:e})}),abort(){O.tasks.delete(t)}}}function G(a,t){Ct(()=>{a.dispatchEvent(new CustomEvent(t))})}function Gt(a){if(a==="float")return"cssFloat";if(a==="offset")return"cssOffset";if(a.startsWith("--"))return a;const t=a.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(e=>e[0].toUpperCase()+e.slice(1)).join("")}function lt(a){const t={},e=a.split(";");for(const r of e){const[s,i]=r.split(":");if(!s||i===void 0)break;const g=Gt(s.trim());t[g]=i.trim()}return t}const Jt=a=>a;function Lt(a,t,e,r){var s=(a&Ut)!==0,i=(a&Dt)!==0,g=s&&i,y=(a&It)!==0,z=g?"both":s?"in":"out",n,d=t.inert,u=t.style.overflow,l,c;function x(){var b=St,F=tt;et(null),at(null);try{return n??(n=e()(t,(r==null?void 0:r())??{},{direction:z}))}finally{et(b),at(F)}}var p={is_global:y,in(){var b;if(t.inert=d,!s){c==null||c.abort(),(b=c==null?void 0:c.reset)==null||b.call(c);return}i||l==null||l.abort(),G(t,"introstart"),l=H(t,x(),c,1,()=>{G(t,"introend"),l==null||l.abort(),l=n=void 0,t.style.overflow=u})},out(b){if(!i){b==null||b(),n=void 0;return}t.inert=!0,G(t,"outrostart"),c=H(t,x(),l,0,()=>{G(t,"outroend"),b==null||b()})},stop:()=>{l==null||l.abort(),c==null||c.abort()}},h=tt;if((h.transitions??(h.transitions=[])).push(p),s&&Et){var f=y;if(!f){for(var m=h.parent;m&&(m.f&mt)!==0;)for(;(m=m.parent)&&(m.f&xt)===0;);f=!m||(m.f&wt)!==0}f&&Tt(()=>{zt(()=>p.in())})}}function H(a,t,e,r,s){var i=r===1;if(kt(t)){var g,y=!1;return Ot(()=>{if(!y){var h=t({direction:i?"in":"out"});g=H(a,h,e,r,s)}}),{abort:()=>{y=!0,g==null||g.abort()},deactivate:()=>g.deactivate(),reset:()=>g.reset(),t:()=>g.t()}}if(e==null||e.deactivate(),!(t!=null&&t.duration))return s(),{abort:P,deactivate:P,reset:P,t:()=>r};const{delay:z=0,css:n,tick:d,easing:u=Jt}=t;var l=[];if(i&&e===void 0&&(d&&d(0,1),n)){var c=lt(n(0,1));l.push(c,c)}var x=()=>1-r,p=a.animate(l,{duration:z});return p.onfinish=()=>{var h=(e==null?void 0:e.t())??1-r;e==null||e.abort();var f=r-h,m=t.duration*Math.abs(f),b=[];if(m>0){var F=!1;if(n)for(var j=Math.ceil(m/16.666666666666668),E=0;E<=j;E+=1){var S=h+f*u(E/j),I=lt(n(S,1-S));b.push(I),F||(F=I.overflow==="hidden")}F&&(a.style.overflow="hidden"),x=()=>{var T=p.currentTime;return h+f*u(T/m)},d&&jt(()=>{if(p.playState!=="running")return!1;var T=x();return d(T,1-T),!0})}p=a.animate(b,{duration:m,fill:"forwards"}),p.onfinish=()=>{x=()=>r,d==null||d(r,1-r),s()}},{abort:()=>{p&&(p.cancel(),p.effect=null,p.onfinish=P)},deactivate:()=>{s=P},reset:()=>{r===0&&(d==null||d(1,0))},t:()=>x()}}const U=class U{constructor(){k(this,"baseUrl");k(this,"fetch",async(t,e)=>{let r;t.startsWith("/")?r=`${this.baseUrl}${t}`:r=`${this.baseUrl}/${t}`;try{const s=await fetch(r,{...e,credentials:"include",headers:{"Content-Type":"application/json",...e==null?void 0:e.headers}});if(!s.ok)throw new Error(s.statusText||`Request failed with status ${s.status}`);return await s.json()}catch(s){throw console.error(`API request failed: ${t}`,s),s}});k(this,"getAllLogs",async t=>this.fetch("/logs",{method:"POST",body:JSON.stringify(t)}));k(this,"getGoalLogs",async(t,e)=>this.fetch(`/logs/goal/${t}`,{method:"POST",body:JSON.stringify(e)}));k(this,"getPromptLogs",async(t,e)=>this.fetch(`/logs/prompt/${t}`,{method:"POST",body:JSON.stringify(e)}));k(this,"getSpend",async t=>this.fetch("/logs/spend",{method:"POST",body:JSON.stringify(t||{})}));this.baseUrl=pt}};k(U,"instance"),k(U,"getInstance",()=>(U.instance||(U.instance=new U),U.instance));let K=U;const ve=K.getInstance(),qt=a=>a;function Wt(a){const t=a-1;return t*t*t+1}function ne(a,{delay:t=0,duration:e=400,easing:r=qt}={}){const s=+getComputedStyle(a).opacity;return{delay:t,duration:e,easing:r,css:i=>`opacity: ${i*s}`}}function Bt(a,{delay:t=0,duration:e=400,easing:r=Wt,axis:s="y"}={}){const i=getComputedStyle(a),g=+i.opacity,y=s==="y"?"height":"width",z=parseFloat(i[y]),n=s==="y"?["top","bottom"]:["left","right"],d=n.map(f=>`${f[0].toUpperCase()}${f.slice(1)}`),u=parseFloat(i[`padding${d[0]}`]),l=parseFloat(i[`padding${d[1]}`]),c=parseFloat(i[`margin${d[0]}`]),x=parseFloat(i[`margin${d[1]}`]),p=parseFloat(i[`border${d[0]}Width`]),h=parseFloat(i[`border${d[1]}Width`]);return{delay:t,duration:e,easing:r,css:f=>`overflow: hidden;opacity: ${Math.min(f*20,1)*g};${y}: ${f*z}px;padding-${n[0]}: ${f*u}px;padding-${n[1]}: ${f*l}px;margin-${n[0]}: ${f*c}px;margin-${n[1]}: ${f*x}px;border-${n[0]}-width: ${f*p}px;border-${n[1]}-width: ${f*h}px;min-${y}: 0`}}function Mt(a,t){Nt(t,!R(t))}var Ht=A('<div class="log-section error svelte-byzau1"><h5 class="svelte-byzau1">Error</h5> <pre class="svelte-byzau1"> </pre></div>'),Kt=A('<div class="log-details svelte-byzau1"><div class="details-row svelte-byzau1"><div class="details-cell svelte-byzau1"><h5 class="svelte-byzau1">Goal ID</h5> <pre class="svelte-byzau1"> </pre></div> <div class="details-cell svelte-byzau1"><h5 class="svelte-byzau1">Prompt ID</h5> <pre class="svelte-byzau1"> </pre></div></div> <div class="log-section svelte-byzau1"><h5 class="svelte-byzau1">Input</h5> <pre class="svelte-byzau1"> </pre></div> <div class="log-section svelte-byzau1"><h5 class="svelte-byzau1">Output</h5> <pre class="svelte-byzau1"> </pre></div> <!></div>'),$t=A('<div class="log-container svelte-byzau1"><div class="log-row svelte-byzau1"><div class="log-cell svelte-byzau1"> </div> <div class="log-cell svelte-byzau1"> </div> <div class="log-cell svelte-byzau1"> </div> <div class="log-cell svelte-byzau1"><span class="token-count svelte-byzau1"> </span> / <span class="token-count svelte-byzau1"> </span></div> <div class="log-cell svelte-byzau1"> </div> <div class="log-cell svelte-byzau1"><button class="btn btn-sm btn-secondary svelte-byzau1"> </button></div></div> <!></div>');function Qt(a,t){ot(t,!0);let e=Ft(!1);var r=$t(),s=o(r),i=o(s),g=o(i,!0);v(i);var y=_(i,2),z=o(y);v(y);var n=_(y,2),d=o(n);v(n);var u=_(n,2),l=o(u),c=o(l,!0);v(l);var x=_(l,2),p=o(x,!0);v(x),v(u);var h=_(u,2),f=o(h);v(h);var m=_(h,2),b=o(m);b.__click=[Mt,e];var F=o(b);v(b),v(m),v(s);var j=_(s,2);{var E=S=>{var I=Kt(),T=o(I),C=o(T),$=_(o(C),2),dt=o($,!0);v($),v(C);var Q=_(C,2),V=_(o(Q),2),ct=o(V,!0);v(V),v(Q),v(T);var J=_(T,2),X=_(o(J),2),ut=o(X,!0);v(X),v(J);var L=_(J,2),Y=_(o(L),2),ft=o(Y,!0);v(Y),v(L);var gt=_(L,2);{var _t=q=>{var W=Ht(),Z=_(o(W),2),bt=o(Z,!0);v(Z),v(W),B(()=>w(bt,t.log.error)),N(q,W)};M(gt,q=>{t.log.error&&q(_t)})}v(I),B(()=>{w(dt,t.log.goalUID),w(ct,t.log.promptUID),w(ut,t.log.inputObject),w(ft,t.log.outputObject)}),Lt(3,I,()=>Bt),N(S,I)};M(j,S=>{R(e)&&S(E)})}v(r),B((S,I,T,C)=>{D(i,"title",S),w(g,I),D(y,"title",t.log.goalUID),w(z,`${T??""}${(t.log.goalUID.length>10?"...":"")??""}`),D(n,"title",t.log.promptUID),w(d,`${C??""}${(t.log.promptUID.length>10?"...":"")??""}`),D(u,"title",`Input: ${t.log.inputTokens} tokens, Output: ${t.log.outputTokens} tokens`),D(l,"title",`Input Tokens: ${t.log.inputTokens}`),w(c,t.log.inputTokens),D(x,"title",`Output Tokens: ${t.log.outputTokens}`),w(p,t.log.outputTokens),D(h,"title",`Total cost: $${t.log.cost}`),w(f,`$${t.log.cost??""}`),w(F,`${(R(e)?"Hide":"Show")??""} Details`)},[()=>new Date(t.log.timestamp*1e3).toLocaleString(),()=>new Date(t.log.timestamp*1e3).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),()=>t.log.goalUID.substring(0,10),()=>t.log.promptUID.substring(0,10)]),N(a,r),vt()}Pt(["click"]);var Vt=A('<div class="log-row empty-row svelte-uvdxbf"><div class="log-cell svelte-uvdxbf"></div> <div class="log-cell svelte-uvdxbf"></div> <div class="log-cell svelte-uvdxbf"></div> <div class="log-cell svelte-uvdxbf"></div> <div class="log-cell svelte-uvdxbf"></div> <div class="log-cell svelte-uvdxbf"></div></div>'),Xt=A('<p class="no-logs svelte-uvdxbf">No logs found. Try adjusting your filters.</p>'),Yt=A('<div class="logs-container svelte-uvdxbf"><div class="log-table svelte-uvdxbf"><div class="log-header-row svelte-uvdxbf"><div class="log-cell svelte-uvdxbf">Time</div> <div class="log-cell svelte-uvdxbf">Goal ID</div> <div class="log-cell svelte-uvdxbf">Prompt ID</div> <div class="log-cell svelte-uvdxbf">Tokens</div> <div class="log-cell svelte-uvdxbf">Cost</div> <div class="log-cell svelte-uvdxbf">Actions</div></div> <!> <!></div> <!></div>');function de(a,t){ot(t,!0);let e=it(t,"logs",19,()=>[]),r=it(t,"cells",3,0),s=At(()=>{const u=Math.max(0,r()-e().length);return Array(u).fill(null)});var i=Yt(),g=o(i),y=_(o(g),2);st(y,17,e,rt,(u,l)=>{Qt(u,{get log(){return R(l)}})});var z=_(y,2);st(z,17,()=>R(s),rt,(u,l)=>{var c=Vt();N(u,c)}),v(g);var n=_(g,2);{var d=u=>{var l=Xt();N(u,l)};M(n,u=>{e().length===0&&u(d)})}v(i),N(a,i),vt()}export{de as L,ne as f,ve as l,Lt as t};
